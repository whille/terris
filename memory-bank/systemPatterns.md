# 系统架构和设计模式

## 整体架构

### 文件结构
```
/tetris/
├── index.html          # 主页面
├── styles/
│   └── style.css       # 样式文件
├── scripts/
│   ├── game.js         # 主游戏逻辑
│   ├── tetris.js       # 方块和游戏板逻辑
│   └── controls.js     # 输入控制
└── memory-bank/        # 项目文档
```

### 核心组件设计

#### 1. Game类 (game.js)
- 游戏主控制器
- 管理游戏状态（开始、暂停、结束）
- 控制游戏循环和时间
- 处理分数和等级逻辑

#### 2. Tetris类 (tetris.js)
- 游戏板和方块管理
- 方块移动、旋转逻辑
- 行消除检测和处理
- 碰撞检测

#### 3. Controls类 (controls.js)
- 键盘输入处理
- 移动设备触摸控制
- 事件绑定和解绑

## 设计模式

### 1. 模块化设计
- 每个功能模块独立的JavaScript文件
- 使用ES6模块或IIFE模式避免全局污染
- 清晰的API接口设计

### 2. 状态管理
- 集中管理游戏状态
- 状态变化通过明确的方法调用
- 状态持久化（本地存储高分）

### 3. 事件驱动
- 使用事件系统处理用户输入
- 游戏状态变化触发相应事件
- 解耦组件间的依赖关系

## 关键技术决策

### 渲染方式
- 使用HTML5 Canvas进行游戏渲染
- 2D上下文，适合方块游戏的需求
- 支持高效的像素级操作

### 动画系统
- 使用requestAnimationFrame实现平滑动画
- 基于时间的动画系统，不依赖帧率
- 可配置的动画速度和缓动效果

### 数据结构
- 游戏板：二维数组表示
- 方块形状：预定义的形状模板
- 坐标系统：标准笛卡尔坐标系
